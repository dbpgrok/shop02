<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Shop02 - Boutique Musique SÃ©curisÃ©e PrÃ©-30s PRO</title>
<style>
body{font-family:'Arial',sans-serif;background:linear-gradient(135deg,#f4f4f4,#e8e8e8);margin:0;padding:20px;max-width:1200px;margin:auto;box-sizing:border-box;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;}
header{background:linear-gradient(135deg,#2c3e50,#34495e);color:white;text-align:center;padding:2.5rem 2rem;border-radius:20px;box-shadow:0 10px 30px rgba(44,62,80,0.3);margin-bottom:2rem;}
h1{font-size:2.5rem;margin:0;font-weight:300;text-shadow:0 2px 10px rgba(0,0,0,0.3);}
.subtitle{font-size:1.2rem;margin:0.5rem 0;opacity:0.9;}
.track{background:linear-gradient(135deg,#cd7f32,#b8860b);padding:25px;margin:20px 0;border-radius:20px;box-shadow:0 10px 30px rgba(205,127,50,0.4);display:grid;grid-template-columns:250px 1fr auto auto;gap:20px;align-items:center;transition:all 0.3s ease;}
.track:hover{transform:translateY(-8px);box-shadow:0 15px 40px rgba(205,127,50,0.6);}
.track.active{box-shadow:0 20px 50px rgba(205,127,50,0.8);transform:translateY(-12px);}
.cover{width:250px;height:250px;border-radius:15px;box-shadow:0 8px 25px rgba(0,0,0,0.3);object-fit:cover;}
.title{font-size:1.4rem;font-weight:bold;color:white;text-shadow:0 2px 5px rgba(0,0,0,0.5);margin:0;}
.artist{font-size:1rem;color:#f4e8c1;opacity:0.9;margin:0 0 10px 0;}
.price{color:#ffd700;font-size:1.3rem;font-weight:bold;text-shadow:0 1px 3px rgba(0,0,0,0.3);}
audio{width:100%;height:50px;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,0.2);background:#fff;}
.loading{text-align:center;color:#f4e8c1;font-style:italic;}
.btn{padding:12px 25px;background:linear-gradient(45deg,#27ae60,#2ecc71);color:white;border:none;border-radius:25px;cursor:pointer;font-weight:bold;font-size:1rem;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(39,174,96,0.4);}
.btn:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(39,174,96,0.6);}
.buy{background:linear-gradient(45deg,#e74c3c,#c0392b);box-shadow:0 4px 15px rgba(231,76,60,0.4);}
.buy:hover{box-shadow:0 8px 25px rgba(231,76,60,0.6);}
.play-btn{background:linear-gradient(45deg,#3498db,#2980b9);margin-right:10px;}
.play-btn.active{background:linear-gradient(45deg,#e67e22,#d35400) !important;box-shadow:0 6px 20px rgba(230,126,34,0.6) !important;}
@media (max-width:900px){.track{grid-template-columns:250px 1fr;grid-template-rows:auto auto;text-align:center;}.cover{margin:0 auto 15px auto;}}
@media (max-width:600px){.track{grid-template-columns:1fr;}.cover{width:200px;height:200px;}}
</style>
</head>
<body>
<header>
<h1>ğŸµ Shop02 Boutique Musique</h1>
<p class="subtitle">PrÃ©-Ã©coutez 30 secondes en haute qualitÃ© â€¢ Achetez instantanÃ©ment â€¢ ğŸ”’ Ultra-sÃ©curisÃ©<br><small>ğŸ§ Un seul lecteur Ã  la fois</small></p>
</header>
<main>
<!-- Track 1: Hamsterrad-Revolte.mp3 -->
<div class="track" data-track="1">
<img src="https://raw.githubusercontent.com/dbpgrok/shop02/main/assets/0001.jpg" alt="Cover Hamsterrad Revolte" class="cover" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2RjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNvdmVyPC90ZXh0Pjwvc3ZnPg==';this.alt='Fallback Cover';">
<div>
<h2 class="title">Hamsterrad Revolte</h2>
<p class="artist">AI101MUSIC â€¢ Single 2026</p>
</div>
<div id="audio-container1" style="display:none;">
    <div class="loading" id="loading1">ğŸ”„ Chargement sÃ©curisÃ© de la prÃ©-Ã©coute...</div>
    <audio id="audio1" controls preload="none" controlsList="nodownload noremoteplayback nopicture-in-picture" style="width:350px;display:none;">
        Votre navigateur ne supporte pas l'audio.
    </audio>
</div>
<div class="price">â‚¬0.79</div>
<button class="btn play-btn" id="playBtn1" onclick="playPreview('1')">â–¶ï¸ Ã‰couter 30s</button>
<button class="btn buy" onclick="buy('Hamsterrad Revolte')">ğŸ’³ Acheter</button>
</div>

<!-- Track 2: Self Care Groove.mp3 -->
<div class="track" data-track="2">
<img src="https://raw.githubusercontent.com/dbpgrok/shop02/main/assets/0002.jpg" alt="Cover Self Care Groove" class="cover" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2RjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNvdmVyPC90ZXh0Pjwvc3ZnPg==';this.alt='Fallback Cover';">
<div>
<h2 class="title">Self Care Groove</h2>
<p class="artist">AI101MUSIC â€¢ Single 2026</p>
</div>
<div id="audio-container2" style="display:none;">
    <div class="loading" id="loading2">ğŸ”„ Chargement sÃ©curisÃ© de la prÃ©-Ã©coute...</div>
    <audio id="audio2" controls preload="none" controlsList="nodownload noremoteplayback nopicture-in-picture" style="width:350px;display:none;">
        Votre navigateur ne supporte pas l'audio.
    </audio>
</div>
<div class="price">â‚¬0.79</div>
<button class="btn play-btn" id="playBtn2" onclick="playPreview('2')">â–¶ï¸ Ã‰couter 30s</button>
<button class="btn buy" onclick="buy('Self Care Groove')">ğŸ’³ Acheter</button>
</div>

<!-- Track 3: The Hope Wins.mp3 -->
<div class="track" data-track="3">
<img src="https://raw.githubusercontent.com/dbpgrok/shop02/main/assets/0003.jpg" alt="Cover The Hope Wins" class="cover" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2RjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNvdmVyPC90ZXh0Pjwvc3ZnPg==';this.alt='Fallback Cover';">
<div>
<h2 class="title">The Hope Wins</h2>
<p class="artist">AI101MUSIC â€¢ Single 2026</p>
</div>
<div id="audio-container3" style="display:none;">
    <div class="loading" id="loading3">ğŸ”„ Chargement sÃ©curisÃ© de la prÃ©-Ã©coute...</div>
    <audio id="audio3" controls preload="none" controlsList="nodownload noremoteplayback nopicture-in-picture" style="width:350px;display:none;">
        Votre navigateur ne supporte pas l'audio.
    </audio>
</div>
<div class="price">â‚¬0.79</div>
<button class="btn play-btn" id="playBtn3" onclick="playPreview('3')">â–¶ï¸ Ã‰couter 30s</button>
<button class="btn buy" onclick="buy('The Hope Wins')">ğŸ’³ Acheter</button>
</div>

<!-- Track 4: trk3.mp3 -->
<div class="track" data-track="4">
<img src="https://raw.githubusercontent.com/dbpgrok/shop02/main/assets/0004.jpg" alt="Cover trk3" class="cover" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2RjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNvdmVyPC90ZXh0Pjwvc3ZnPg==';this.alt='Fallback Cover';">
<div>
<h2 class="title">trk3</h2>
<p class="artist">AI101MUSIC â€¢ Single 2026</p>
</div>
<div id="audio-container4" style="display:none;">
    <div class="loading" id="loading4">ğŸ”„ Chargement sÃ©curisÃ© de la prÃ©-Ã©coute...</div>
    <audio id="audio4" controls preload="none" controlsList="nodownload noremoteplayback nopicture-in-picture" style="width:350px;display:none;">
        Votre navigateur ne supporte pas l'audio.
    </audio>
</div>
<div class="price">â‚¬0.79</div>
<button class="btn play-btn" id="playBtn4" onclick="playPreview('4')">â–¶ï¸ Ã‰couter 30s</button>
<button class="btn buy" onclick="buy('trk3')">ğŸ’³ Acheter</button>
</div>

<!-- Track 5: Al Dogma.mp3 -->
<div class="track" data-track="5">
<img src="https://raw.githubusercontent.com/dbpgrok/shop02/main/assets/0005.jpg" alt="Cover Al Dogma" class="cover" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2RjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNvdmVyPC90ZXh0Pjwvc3ZnPg==';this.alt='Fallback Cover';">
<div>
<h2 class="title">Al Dogma</h2>
<p class="artist">AI101MUSIC â€¢ Single 2026</p>
</div>
<div id="audio-container5" style="display:none;">
    <div class="loading" id="loading5">ğŸ”„ Chargement sÃ©curisÃ© de la prÃ©-Ã©coute...</div>
    <audio id="audio5" controls preload="none" controlsList="nodownload noremoteplayback nopicture-in-picture" style="width:350px;display:none;">
        Votre navigateur ne supporte pas l'audio.
    </audio>
</div>
<div class="price">â‚¬0.79</div>
<button class="btn play-btn" id="playBtn5" onclick="playPreview('5')">â–¶ï¸ Ã‰couter 30s</button>
<button class="btn buy" onclick="buy('Al Dogma')">ğŸ’³ Acheter</button>
</div>

<!-- Track 6: Sebene2.mp3 -->
<div class="track" data-track="6">
<img src="https://raw.githubusercontent.com/dbpgrok/shop02/main/assets/0006.jpg" alt="Cover Sebene2" class="cover" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2RjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNvdmVyPC90ZXh0Pjwvc3ZnPg==';this.alt='Fallback Cover';">
<div>
<h2 class="title">Sebene2</h2>
<p class="artist">AI101MUSIC â€¢ Single 2026</p>
</div>
<div id="audio-container6" style="display:none;">
    <div class="loading" id="loading6">ğŸ”„ Chargement sÃ©curisÃ© de la prÃ©-Ã©coute...</div>
    <audio id="audio6" controls preload="none" controlsList="nodownload noremoteplayback nopicture-in-picture" style="width:350px;display:none;">
        Votre navigateur ne supporte pas l'audio.
    </audio>
</div>
<div class="price">â‚¬0.79</div>
<button class="btn play-btn" id="playBtn6" onclick="playPreview('6')">â–¶ï¸ Ã‰couter 30s</button>
<button class="btn buy" onclick="buy('Sebene2')">ğŸ’³ Acheter</button>
</div>
    
</main>
<script>
let audioBlobs = {}; // Stockage des Blobs par ID
let currentPlayingTrack = null; // Track actuellement en lecture
const mp3Files = ['Hamsterrad-Revolte.mp3', 'Self Care Groove.mp3', 'The Hope Wins.mp3', 'trk3.mp3', 'Al Dogma.mp3', 'Sebene2.mp3'];

// ArrÃªte TOUS les autres players + reset visuel
function stopAllOthers(newTrackId) {
    for (let i = 1; i <= 6; i++) {
        if (i.toString() !== newTrackId) {
            const audio = document.getElementById(`audio${i}`);
            const trackDiv = document.querySelector(`[data-track="${i}"]`);
            const playBtn = document.getElementById(`playBtn${i}`);
            
            if (audio) {
                audio.pause();
                audio.currentTime = 0;
            }
            if (trackDiv) trackDiv.classList.remove('active');
            if (playBtn) {
                playBtn.classList.remove('active');
                playBtn.textContent = 'â–¶ï¸ Ã‰couter 30s';
            }
        }
    }
}

// Met Ã  jour visuel du track actif
function setActiveTrack(trackId) {
    const trackDiv = document.querySelector(`[data-track="${trackId}"]`);
    const playBtn = document.getElementById(`playBtn${trackId}`);
    
    // Reset tous
    document.querySelectorAll('.track').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.play-btn').forEach(b => b.classList.remove('active'));
    
    // Active le nouveau
    if (trackDiv) trackDiv.classList.add('active');
    if (playBtn) {
        playBtn.classList.add('active');
        playBtn.textContent = 'â¸ï¸ En cours...';
    }
    
    currentPlayingTrack = trackId;
}

// Chargement sÃ©curisÃ© du Blob au premier clic
async function loadSecurePreview(trackId) {
    const id = parseInt(trackId);
    const container = document.getElementById(`audio-container${trackId}`);
    const loading = document.getElementById(`loading${trackId}`);
    const audio = document.getElementById(`audio${trackId}`);
    const playBtn = document.getElementById(`playBtn${trackId}`);
    
    if (audioBlobs[trackId]) return; // DÃ©jÃ  chargÃ©
    
    loading.style.display = 'block';
    playBtn.disabled = true;
    playBtn.textContent = 'ğŸ”„ Chargement...';
    
    try {
        const mp3Path = `assets/${mp3Files[id - 1]}`;
        const response = await fetch(mp3Path);
        if (!response.ok) throw new Error('Erreur chargement');
        
        const arrayBuffer = await response.arrayBuffer();
        const blob = new Blob([arrayBuffer], { type: 'audio/mpeg' });
        const blobUrl = URL.createObjectURL(blob);
        
        audioBlobs[trackId] = blobUrl;
        audio.src = blobUrl;
        audio.load();
        
        loading.style.display = 'none';
        audio.style.display = 'block';
        playBtn.disabled = false;
        playBtn.textContent = 'â¸ï¸ En cours...';
        
        setTimeout(() => {
            if (audio.paused && currentPlayingTrack === trackId) {
                playBtn.textContent = 'ğŸ”„ Rejouer 30s';
                trackDiv.classList.remove('active');
                playBtn.classList.remove('active');
            }
        }, 60000);
        
    } catch (error) {
        loading.textContent = 'âŒ Erreur de chargement';
        console.error('Erreur audio:', error);
        playBtn.disabled = false;
        playBtn.textContent = 'â–¶ï¸ RÃ©essayer';
    }
}

// Lecture 30s sÃ©curisÃ©e (avec arrÃªt des autres)
function playPreview(trackId) {
    stopAllOthers(trackId);
    setActiveTrack(trackId);
    
    const audio = document.getElementById(`audio${trackId}`);
    loadSecurePreview(trackId).then(() => {
        audio.currentTime = 0;
        audio.play();
    });
}

// Limite 30s ULTRA-STRICT
function setupAudioLimits(audio) {
    audio.addEventListener('timeupdate', function() {
        if (this.currentTime > 30) {
            this.pause();
            this.currentTime = 0;
            const trackId = this.id.replace('audio', '');
            const trackDiv = document.querySelector(`[data-track="${trackId}"]`);
            const playBtn = document.getElementById(`playBtn${trackId}`);
            if (trackDiv) trackDiv.classList.remove('active');
            if (playBtn) {
                playBtn.classList.remove('active');
                playBtn.textContent = 'ğŸ”„ Rejouer 30s';
            }
        }
    });
    
    audio.addEventListener('play', function() {
        const checkTime = () => {
            if (!this.paused && this.currentTime > 30) {
                this.pause();
                this.currentTime = 0;
            }
        };
        const timer = setInterval(checkTime, 100);
        this._timer = timer;
    });
    
    audio.addEventListener('pause', function() {
        if (this._timer) {
            clearInterval(this._timer);
            this._timer = null;
        }
    });

    // ArrÃªt auto si autre track sÃ©lectionnÃ©
    audio.addEventListener('play', function() {
        const trackId = this.id.replace('audio', '');
        if (currentPlayingTrack && currentPlayingTrack !== trackId) {
            this.pause();
            this.currentTime = 0;
        }
    });
}

// Initialisation pour TOUS les audios
document.addEventListener('DOMContentLoaded', function() {
    setupAudioLimits(document.getElementById('audio1'));
    setupAudioLimits(document.getElementById('audio2'));
    setupAudioLimits(document.getElementById('audio3'));
    setupAudioLimits(document.getElementById('audio4'));
    setupAudioLimits(document.getElementById('audio5'));
    setupAudioLimits(document.getElementById('audio6'));
    
    // Protections anti-fuite
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('dragstart', e => e.preventDefault());
    document.addEventListener('selectstart', e => e.preventDefault());
    
    ['audio1', 'audio2', 'audio3', 'audio4', 'audio5', 'audio6'].forEach(id => {
        const audio = document.getElementById(id);
        if (audio) {
            audio.addEventListener('contextmenu', e => e.preventDefault());
            audio.addEventListener('dragstart', e => e.preventDefault());
        }
    });
    
    // Anti-inspection
    document.addEventListener('keydown', e => {
        if (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.key === 'i' || e.key === 'j')) e.preventDefault();
        if (e.key === 'F12') e.preventDefault();
    }, false);
});

function buy(title) {
    alert(`âœ… Paiement "${title}" validÃ© ! Lien tÃ©lÃ©chargement envoyÃ© par email.\n(Stripe/PayPal simulation)\n\nğŸ”’ Votre fichier complet est maintenant sÃ©curisÃ© !`);
}
</script>
</body>
</html>
